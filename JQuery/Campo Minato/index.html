<!DOCTYPE html>
<html>
    <head>
        <title>Campo Minato</title>

        <link href="style.css" rel="stylesheet" type="text/css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
        <script src="script/campo.js" type="text/javascript"></script>
        <script src="script/casella.js" type="text/javascript"></script>
        <script src="script/partita.js" type="text/javascript"></script>
    </head>

    <body>
        <div id="menu">
            <img id="bandiera" src="images/bandiera.png"> <p id="bandiereRimaste">10</p>

            <select id="numeroCelle" onchange="campo.cambiaNumeroCelle(document.getElementById('numeroCelle').value, document.getElementById('numeroCelle').value)">
                <option value="10" selected>Facile: 10</option>
                <option value="15">Medio: 15</option>
                <option value="20">Difficile 20</option>
                <option value="30">Esperto: 30</option>
            </select> 
        </div> <br>

        <input id="bottoneStato" type="button" value="PLAY" onclick="partita.cambiaStato()">
        <br> <br>

        <div id="griglia"></div>
    </body> 

    <script type="text/javascript">
        const partita = new Partita();
        const campo = new Campo(partita, document.getElementById("numeroCelle").value, document.getElementById("numeroCelle").value);

        $("#griglia").click(function(e) {
            if (partita.esecuzione == true) {
                let elementoCliccato = $(e.target);
                campo.scopriCasella(parseInt(elementoCliccato.attr("data-riga")), parseInt(elementoCliccato.attr("data-colonna")));
            } 
        });

        $("#griglia").bind('contextmenu', function(e) {
            e.preventDefault();

            if (partita.esecuzione == true) {
                let elementoCliccato = $(e.target);
                campo.assegnaBandiera(parseInt(elementoCliccato.attr("data-riga")), parseInt(elementoCliccato.attr("data-colonna"))); 
            }
        });
    </script>
</html>